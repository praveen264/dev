(this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]||[]).push([[34],{1003:function(e,t){},1086:function(e,t){},1087:function(e,t){},1596:function(e,t,a){"use strict";a.r(t);a(695);var c=a(579),n=a.n(c),r=a(580),s=a(543),o=a(0),i=a.n(o),b=a(1084),j=(a(581),a(861),a(554)),u=a.n(j),l=(a(1135),a(142),a(841)),O=(a(587),a(18)),h=Object(l.a)((function(e){return{root:{"& > *":{margin:e.spacing(2)}},input:{display:"none"},formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}}));t.default=function(e){var t=e.match.params.school_id,a=(h(),Object(o.useState)("")),c=Object(s.a)(a,2),j=(c[0],c[1],Object(o.useState)("")),l=Object(s.a)(j,2),d=(l[0],l[1],Object(o.useState)("")),m=Object(s.a)(d,2),p=(m[0],m[1],Object(o.useState)("")),f=Object(s.a)(p,2),S=(f[0],f[1],Object(o.useState)("")),N=Object(s.a)(S,2),x=(N[0],N[1],Object(o.useState)("")),g=Object(s.a)(x,2),P=(g[0],g[1],Object(o.useState)("")),k=Object(s.a)(P,2),v=(k[0],k[1],Object(o.useState)("")),F=Object(s.a)(v,2),y=(F[0],F[1],Object(o.useState)("")),w=Object(s.a)(y,2),C=(w[0],w[1],Object(o.useState)("")),L=Object(s.a)(C,2),M=(L[0],L[1],Object(o.useState)("")),E=Object(s.a)(M,2),A=(E[0],E[1],Object(o.useState)("")),G=Object(s.a)(A,2),B=(G[0],G[1],Object(o.useState)("")),D=Object(s.a)(B,2),_=(D[0],D[1],Object(o.useState)("")),I=Object(s.a)(_,2),J=(I[0],I[1],Object(o.useState)("")),T=Object(s.a)(J,2),W=(T[0],T[1],Object(o.useState)([])),z=Object(s.a)(W,2),R=(z[0],z[1]),U=Object(o.useState)(),Z=Object(s.a)(U,2),$=Z[0],q=(Z[1],Object(o.useState)([])),H=Object(s.a)(q,2),K=(H[0],H[1]),Q=Object(o.useState)(),V=Object(s.a)(Q,2),X=V[0],Y=(V[1],Object(o.useState)()),ee=Object(s.a)(Y,2),te=(ee[0],ee[1],Object(o.useState)(!1)),ae=Object(s.a)(te,2),ce=(ae[0],ae[1],i.a.useState([])),ne=Object(s.a)(ce,2),re=(ne[0],ne[1],Object(o.useState)([])),se=Object(s.a)(re,2),oe=(se[0],se[1]),ie=Object(o.useState)([]),be=Object(s.a)(ie,2),je=(be[0],be[1]),ue=Object(o.useState)(""),le=Object(s.a)(ue,2),Oe=(le[0],le[1],Object(o.useState)("")),he=Object(s.a)(Oe,2),de=(he[0],he[1],Object(o.useState)({})),me=Object(s.a)(de,2),pe=(me[0],me[1],Object(o.useState)({})),fe=Object(s.a)(pe,2),Se=(fe[0],fe[1],Object(o.useState)({})),Ne=Object(s.a)(Se,2),xe=(Ne[0],Ne[1],Object(o.useState)({})),ge=Object(s.a)(xe,2),Pe=(ge[0],ge[1],Object(o.useState)({})),ke=Object(s.a)(Pe,2),ve=(ke[0],ke[1],Object(o.useState)({})),Fe=Object(s.a)(ve,2),ye=(Fe[0],Fe[1],Object(o.useState)({})),we=Object(s.a)(ye,2),Ce=(we[0],we[1],Object(o.useState)({})),Le=Object(s.a)(Ce,2),Me=(Le[0],Le[1],Object(o.useState)({})),Ee=Object(s.a)(Me,2),Ae=(Ee[0],Ee[1],Object(o.useState)({})),Ge=Object(s.a)(Ae,2),Be=(Ge[0],Ge[1],Object(o.useState)({})),De=Object(s.a)(Be,2),_e=(De[0],De[1],Object(o.useState)({})),Ie=Object(s.a)(_e,2),Je=(Ie[0],Ie[1],Object(o.useState)({})),Te=Object(s.a)(Je,2),We=(Te[0],Te[1],Object(o.useState)({})),ze=Object(s.a)(We,2),Re=(ze[0],ze[1],Object(o.useState)({})),Ue=Object(s.a)(Re,2),Ze=(Ue[0],Ue[1],Object(o.useState)({})),$e=Object(s.a)(Ze,2),qe=($e[0],$e[1],Object(o.useState)("")),He=Object(s.a)(qe,2),Ke=(He[0],He[1]),Qe=Object(o.useState)(""),Ve=Object(s.a)(Qe,2),Xe=Ve[0],Ye=Ve[1],et=function(){var e=Object(r.a)(n.a.mark((function e(){var a,c,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=rt,console.log(a),c=0;c<a.length;c++)r=/^[A-Za-z]+$/,a[c].FirstName.match(r)&&a[c].FirstName&&a[c].ClassName&&a[c].SectionName&&a[c].ParentFirstName&&a[c].ParentFirstName.match(r)&&!isNaN(a[c].ParentMobileNumber)&&10==a[c].ParentMobileNumber.length?a[c].username=a[c].FirstName.substring(0,4).concat(a[c].ParentMobileNumber.slice(-5)):(a[c].error=[],a[c].FirstName.match(r)||a[c].error.push("error in first name:first name should not have spaces or numbers"),a[c].FirstName||a[c].error.push("error:first name cannot be left blank"),a[c].ClassName||a[c].error.push("error:Class name cannot be left blank"),a[c].SectionName||a[c].error.push("error:Section name cannot be left blank"),a[c].ParentFirstName&&a[c].ParentFirstName.match(r)||a[c].error.push("error:Parent first name cannot be left blank and cannot contain spaces or numbers"),isNaN(a[c].ParentMobileNumber)&&a[c].error.push("error:Parent mobile number should be of 10 digits and cannot contain albhabets"),10!=a[c].ParentMobileNumber.length&&a[c].error.push("error:Parent mobile number should be of 10 digits and cannot contain albhabets"),a[c].FirstName="",a[c].LastName="",a[c].AdmissionNo="",a[c].ParentEmail="",a[c].ParentLastName="",a[c].ParentMobileNumber="",a[c].ParentGender="",a[c].Gender="",a[c].DOB="",a[c].ParentFirstName="",a[c].ClassName="",a[c].SectionName="",a[c].username="");return st(a),e.next=6,u.a.post("".concat("http://test.saakshar.co.in/api/v1","/auth/create-student/").concat(t),a).then((function(e){console.log("after !!!!"),console.log(e.data),"student has been created"!=e.data.message?(Ke(e.data.error),alert(e.data.error)):Ye("student has been created")})).catch((function(e){console.log(e)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){u.a.get("http://test.saakshar.co.in/api/v1/auth/get-countries").then((function(e){var t=e.data.data;oe(t)})).catch((function(e){console.log(e)}))}),[]),Object(o.useEffect)((function(){u.a.get("http://test.saakshar.co.in/api/v1/auth/get-chain-school-list").then((function(e){je(e.data.data)})).catch((function(e){console.log(e)}))}),[]);Object(o.useEffect)((function(){$&&u.a.get("http://test.saakshar.co.in/api/v1"+"/auth/get-states/".concat($)).then((function(e){var t=e.data.data;R(t)})).catch((function(e){console.log(e)}))}),[$]),Object(o.useEffect)((function(){X&&u.a.get("http://test.saakshar.co.in/api/v1"+"/auth/get-cities/".concat($,"/").concat(X)).then((function(e){var t=e.data.data;K(t)})).catch((function(e){console.log(e)}))}),[X]);var tt=Object(o.useState)([{class_name:"",total_student:""}]),at=Object(s.a)(tt,2),ct=(at[0],at[1],Object(o.useState)([])),nt=Object(s.a)(ct,2),rt=nt[0],st=nt[1];return Object(O.jsxs)("div",{children:[Object(O.jsxs)("form",{children:[Object(O.jsx)("input",{type:"file",onChange:function(e){!function(e){var t=JSON.parse(localStorage.getItem("user")).token;new Promise((function(t,a){var c=new FileReader;c.readAsArrayBuffer(e),c.onload=function(e){var a=e.target.result,c=b.read(a,{type:"binary",cellDates:!0,dateNF:"mm/dd/yyyy;"}),n=c.SheetNames[1],r=c.Sheets[n],s=b.utils.sheet_to_json(r,{raw:!1});t(s)},c.onerror=function(e){a(e)}})).then(function(){var e=Object(r.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:st(a),console.log(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}(e.target.files[0])}}),Object(O.jsx)("button",{type:"button",className:"btn btn-success",onClick:et,children:"Upload"})," \xa0",Object(O.jsx)("a",{href:"/files/StandardStudentTemplate.xlsx",className:"btn btn-primary",download:!0,children:"Download standard template"})]}),Object(O.jsxs)("table",{class:"table container",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{scope:"col",children:"First Name"}),Object(O.jsx)("th",{scope:"col",children:"Last Name"}),Object(O.jsx)("th",{scope:"col",children:"Gender"}),Object(O.jsx)("th",{scope:"col",children:"DOB"}),Object(O.jsx)("th",{scope:"col",children:"Class Name"}),Object(O.jsx)("th",{scope:"col",children:"Section Name"}),Object(O.jsx)("th",{scope:"col",children:"Admission No"}),Object(O.jsx)("th",{scope:"col",children:"Parent FirstName"}),Object(O.jsx)("th",{scope:"col",children:"Parent LastName"}),Object(O.jsx)("th",{scope:"col",children:"Parent Email"}),Object(O.jsx)("th",{scope:"col",children:"Parent Gender"}),Object(O.jsx)("th",{scope:"col",children:"Parent MobileNumber"}),Object(O.jsx)("th",{scope:"col",children:"username"})]})}),Object(O.jsx)("tbody",{children:""!=Xe?rt.map((function(e){return""!=e.FirstName&&""!=e.LastName&&""!=e.AdmissionNo&&""!=e.ParentEmail&&""!=e.ParentFirstName&&""!=e.ParentLastName&&""!=e.ParentGender&&""!=e.ParentMobileNumber?Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:e.FirstName}),Object(O.jsx)("th",{children:e.LastName}),Object(O.jsx)("th",{children:e.Gender}),Object(O.jsx)("th",{children:e.DOB}),Object(O.jsx)("th",{children:e.ClassName}),Object(O.jsx)("th",{children:e.SectionName}),Object(O.jsx)("th",{children:e.AdmissionNo}),Object(O.jsx)("th",{children:e.ParentFirstName}),Object(O.jsx)("th",{children:e.ParentLastName}),Object(O.jsx)("th",{children:e.ParentEmail}),Object(O.jsx)("th",{children:e.ParentGender}),Object(O.jsx)("th",{children:e.ParentMobileNumber}),Object(O.jsx)("th",{children:e.username})]},e.FirstName):Object(O.jsx)("tr",{style:{border:"3px solid red"},className:"danger",children:Object(O.jsx)("td",{colSpan:"13",children:e.error.map((function(e){return Object(O.jsx)("p",{children:e})}))})})})):""})]})]})}},545:function(e,t,a){var c=a(146).toast;e.exports=function(e,t){switch(e){case"info":c.info(t);break;case"success":c.success(t);break;case"warning":c.warn(t);break;case"error":c.error(t);break;case"dark":c.dark(t);break;default:c(t)}}},554:function(e,t,a){var c,n=a(545),r=a(581).default,s="";localStorage.getItem("user")&&(s=JSON.parse(localStorage.getItem("user")).token),""==s?(console.log("there isno token"),c=r.create({timeout:6e3,headers:{"Content-Type":"application/json"}})):c=r.create({timeout:6e3,headers:{"Content-Type":"application/json",authorization:"Bearer "+s}}),c.interceptors.response.use((function(e){return e}),(function(e){401===e.response.status?(localStorage.removeItem("user"),window.location="/#/login",console.log(e.response.data.message),n("error",e.response.data.message)):n("error",e.response.data.message)})),e.exports=c}}]);
//# sourceMappingURL=34.8e564676.chunk.js.map