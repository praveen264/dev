(this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]||[]).push([[33],{1619:function(e,t,c){"use strict";c.r(t);var a=c(44),n=c(145),i=c(146),s=c(152),o=c(149),r=c(150),j=c(0),u=c(142),l=c(534),d=c(535),b=c(584),m=c.n(b),h=c(532),O=c.n(h),f=c(549),p=c.n(f),v=c(524),x=c(572),S=c(537),g=c(536),_=c(18),k=[{text:"Main Subject",value:"main"},{text:"Optional Subject",value:"optional"},{text:"Practical Subject",value:"practical"},{text:"Elective-1",value:"elective1"},{text:"Elective-2",value:"elective2"}],y=function(e){Object(o.a)(c,e);var t=Object(r.a)(c);function c(e){var a;return Object(n.a)(this,c),(a=t.call(this,e)).getSubjects=function(){O.a.get("http://test.saakshar.co.in/api/v1/sm/get-subjects/").then((function(e){a.setState({subjects:e.data.data})})).catch((function(e){console.log(e)}))},a.formValidationAddSubject=function(){var e=a.state.subject_name,t=!0,c={};return/^[A-Za-z]+$/.test(e)||(c.Subjectrequired="Invalid Subject Name",t=!1),a.setState({errorsForAddSubject:c}),t},a.formValidationAddSubject=function(){var e=!0,t={};return a.state.subject_name.trim()||(t.Subjectrequired=" Required",e=!1),a.setState({errorsForAddSubject:t}),e},a.initialValues={subject_name:"",subject_type:""},a.validationSchema=x.b().shape({subject_name:x.d().required("Subject name is required"),subject_type:x.d().required("Subject type is required")}),a.onSubmit=function(e,t){var c=t.resetForm,n=e.subject_name,i=e.subject_type,o=a.state.loggedInUserId,r=Object(s.a)(a);O.a.post("http://test.saakshar.co.in/api/v1/sm/create-subject",{subject:n,subject_type:i,created_by:o,created_for:"global"}).then((function(e){r.getSubjects(),r.setState({modalVisibilityAddSubject:!1}),c({values:""}),p()("success",e.data.message)})).catch((function(e){console.log(e)}))},a.validationSchemaEdit=x.b().shape({subject_name:x.d().required("Subject name is required"),subject_code:x.d().required("Short code is required"),subject_type:x.d().required("Subject type is required")}),a.onSubmitEdit=function(e){var t=a.state.subject_id,c=a.state.Edited_ShortCode,n=a.state.school_id,i=a.state.subject_name,o=a.state.subject_type;console.log(o);var r=Object(s.a)(a);O.a.put("http://test.saakshar.co.in/api/v1/sm/edit-subject",{subject_id:t,created_for:n,short_code:c,subject:i,subject_type:o}).then((function(e){r.getSubjects(),r.setState({modalVisibilityEditSubject:!1}),p()("success",e.data.message)})).catch((function(e){console.log(e)}))},a.state={subjects:[],modalVisibilityAddSubject:!1,modalVisibilityEditSubject:!1,subject_name:"",subject_type:"",errorsForAddSubject:{},errorsForEditSubject:{},errorsForEditSubjectCode:{},subject_deleted:null,loggedInUserId:JSON.parse(localStorage.getItem("user")).uid,Edited_ShortCode:"",BlockSubject:"",subject_id:""},a.handleAddSubjectSubmit=a.handleAddSubjectSubmit.bind(Object(s.a)(a)),a}return Object(i.a)(c,[{key:"componentWillMount",value:function(){this.getSubjects()}},{key:"handleAddSubjectSubmit",value:function(e){if(e.preventDefault(),this.formValidationAddSubject()){var t=this.state.subject_name,c=this.state.loggedInUserId,a=this;O.a.post("http://test.saakshar.co.in/api/v1/sm/create-subject",{subject:t,created_by:c,created_for:"global"}).then((function(e){a.getSubjects(),a.setState({modalVisibilityAddSubject:!1}),p()("success",e.data.message)})).catch((function(e){console.log(e)}))}}},{key:"isSubjectExist",value:function(e){e.preventDefault();var t=this.state.subject_name,c=this;O.a.post("http://test.saakshar.co.in/api/v1/sm/is-subject-exist",{subject:t,created_for:"global"}).then((function(e){c.setState({subject_name:e.data.subject_name}),p()("success",e.data.message)})).catch((function(e){console.log(e)}))}},{key:"isCodeExist",value:function(e){e.preventDefault();var t=this.state.Edited_ShortCode,c=this;O.a.post("http://test.saakshar.co.in/api/v1/sm/is-short-code-exist",{short_code:t,created_for:"global"}).then((function(e){c.setState({short_code:e.data.Edited_ShortCode}),p()("success",e.data.message)})).catch((function(e){console.log(e)}))}},{key:"handleBlockSubject",value:function(e,t){e.preventDefault(),console.log("Subject-ID-To-Block=",t);var c=this;O.a.put("http://test.saakshar.co.in/api/v1/sm/block-unblock-subject",{subject_id:t}).then((function(e){c.getSubjects(),p()("success",e.data.message)})).catch((function(e){console.log(e)}))}},{key:"deleteSubjects",value:function(e,t){e.preventDefault(),console.log("Subject-ID-To-Delete",t);var c=this,a="http://test.saakshar.co.in/api/v1/sm/delete-subject/"+t;O.a.delete(a).then((function(e){c.getSubjects(),p()("success",e.data.message)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,c=t.subjects,n=t.modalVisibilityAddSubject,i=t.modalVisibilityEditSubject,s=t.subject_name,o=(t.errorsForAddSubject,t.Edited_ShortCode),r=t.subject_type,j=[{title:"Name",field:"subject_name"},{title:"Subject Code",field:"sort_code"},{title:"Status",field:"status",render:function(e){return"active"==e.status?Object(_.jsx)(u.a,{color:"success",children:"Active"}):"deactivated"==e.status?Object(_.jsx)(u.a,{color:"danger",children:"Inactive"}):void 0}},{title:"Type",field:"nature"}];return Object(_.jsx)(u.e,{children:Object(_.jsxs)(u.f,{children:[Object(_.jsxs)(u.H,{visible:n,onDismiss:function(){return e.setState({modalVisibilityAddSubject:!1})},children:[Object(_.jsx)(u.K,{onDismiss:function(){return e.setState({modalVisibilityAddSubject:!1})},children:Object(_.jsx)(u.L,{children:Object(_.jsx)("h5",{children:"Create Subject"})})}),Object(_.jsx)(v.e,{initialValues:this.initialValues,validationSchema:this.validationSchema,onSubmit:this.onSubmit,children:function(t){return Object(_.jsxs)(v.d,{className:"row g-3",children:[Object(_.jsxs)(u.I,{children:[Object(_.jsx)(u.U,{className:"mb-3",children:Object(_.jsxs)(u.k,{md:12,children:[Object(_.jsx)(u.y,{htmlFor:"subject_name",className:"required-field",children:"Subject Name"}),Object(_.jsx)(S.a,{control:"input",type:"text",name:"subject_name",id:"subject_name",placeholder:"Select name"})]})}),Object(_.jsx)(u.U,{children:Object(_.jsxs)(u.k,{md:12,children:[Object(_.jsx)(u.y,{htmlFor:"subject_type",className:"required-field",children:"Subject Type"}),Object(_.jsx)(S.a,{control:"selectwithkey",name:"subject_type",id:"subject_type",placeholder:"Select subject type...",options:k})]})})]}),Object(_.jsxs)(u.J,{children:[Object(_.jsxs)(u.d,{color:"light",onClick:function(){return e.setState({modalVisibilityAddSubject:!1})},children:[Object(_.jsx)(d.a,{icon:l.o})," Cancel"]}),Object(_.jsx)(u.d,{color:"dark",type:"submit",value:"Submit",disabled:t.isSubmitting||!t.dirty||!t.isValid,children:t.isSubmitting?Object(_.jsx)(g.a,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(d.a,{icon:l.l})," Save"]})})]})]})}})]}),Object(_.jsxs)(u.H,{visible:i,onDismiss:function(){return e.setState({modalVisibilityEditSubject:!1})},children:[Object(_.jsx)(u.K,{onDismiss:function(){return e.setState({modalVisibilityEditSubject:!1})},children:Object(_.jsx)(u.L,{children:Object(_.jsx)("h5",{children:"Edit Subject"})})}),Object(_.jsx)(v.e,{initialValues:{subject_name:s,subject_code:o,subject_type:r},validationSchema:this.validationSchemaEdit,onSubmit:this.onSubmitEdit,enableReinitialize:!0,children:function(t){return Object(_.jsxs)(v.d,{className:"row g-3",children:[Object(_.jsxs)(u.I,{children:[Object(_.jsx)(u.y,{htmlFor:"subject_name",className:"required-field",children:"Subject Name"}),Object(_.jsxs)(u.F,{className:"mb-3",children:[Object(_.jsx)(u.k,{md:11,children:Object(_.jsx)(S.a,{control:"input",type:"text",name:"subject_name",id:"subject_name",value:t.values.subject_name,onChange:function(t){var c=t.target;e.setState({subject_name:c.value})},placeholder:"Select name"})}),Object(_.jsx)(u.k,{md:1,children:Object(_.jsx)(u.d,{type:"button",color:"dark",id:"button-addon2",onClick:function(t){return e.isSubjectExist(t)},"data-toggle":"tooltip","data-placement":"top",title:"Click to check subject name available or not",children:Object(_.jsx)(d.a,{icon:l.k})})})]}),Object(_.jsx)(u.y,{htmlFor:"subject_code",className:"required-field",children:"Short Code"}),Object(_.jsxs)(u.F,{className:"mb-3",children:[Object(_.jsx)(u.k,{md:11,children:Object(_.jsx)(S.a,{control:"input",type:"text",name:"subject_code",id:"subject_code",disabled:"disabled",value:t.values.subject_code,onChange:function(t){var c=t.target;e.setState({Edited_ShortCode:c.value})},placeholder:"Subject code"})}),Object(_.jsx)(u.k,{md:1,children:Object(_.jsx)(u.d,{type:"button",color:"dark",id:"button-addon2",onClick:function(t){return e.isCodeExist(t)},"data-toggle":"tooltip","data-placement":"top",title:"Click to check short code available or not",children:Object(_.jsx)(d.a,{icon:l.k})})})]}),Object(_.jsx)(u.U,{mt:3,children:Object(_.jsxs)(u.k,{md:12,children:[Object(_.jsx)(u.y,{htmlFor:"subject_type",className:"required-field",children:"Subject Type"}),Object(_.jsx)(v.b,{name:"subject_type",children:function(c){var n=c.field;return Object(_.jsxs)(u.z,Object(a.a)(Object(a.a)({},n),{},{value:t.values.subject_type,onChange:function(t){var c=t.target;e.setState({subject_type:c.value})},className:"form-control ".concat(t.errors.subject_type&&t.touched.subject_type?"is-invalid":""),children:[Object(_.jsx)("option",{value:"",children:"Select..."}),k.map((function(e){return Object(_.jsx)("option",{value:e.value,children:e.text},e.value)}))]}))}}),Object(_.jsx)(v.a,{name:"subject_type",component:"div",className:"invalid-feedback"})]})})]}),Object(_.jsxs)(u.J,{children:[Object(_.jsxs)(u.d,{color:"light",onClick:function(){return e.setState({modalVisibilityEditSubject:!1})},children:[Object(_.jsx)(d.a,{icon:l.o})," Cancel"]}),Object(_.jsx)(u.d,{color:"dark",type:"submit",value:"Submit",disabled:t.isSubmitting||!t.isValid,children:t.isSubmitting?Object(_.jsx)(g.a,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(d.a,{icon:l.l})," Save"]})})]})]})}})]}),Object(_.jsx)(m.a,{title:"All Subjects",data:c,columns:j,onSelectionChange:function(e){return setSelectedRows(e)},options:{search:!0,paging:!0,filtering:!1,exportButton:!0,actionsColumnIndex:-1,rowStyle:function(e){if(e.tableData.id%2)return{backgroundColor:"#f9f9f9"}},pageSize:15,emptyRowsWhenPaging:!0,pageSizeOptions:[15,30,45]},actions:[{icon:function(){return Object(_.jsxs)(u.d,{color:"dark",onClick:function(){return e.setState({modalVisibilityAddSubject:!0})},children:[Object(_.jsx)(d.a,{icon:l.j})," Add"]})},tooltip:"Add Subject",isFreeAction:!0},function(t){return{icon:function(){return Object(_.jsx)(d.a,{icon:l.f,style:{fontSize:"1rem"},onClick:function(){return e.setState({modalVisibilityEditSubject:!0,Edited_ShortCode:t.sort_code,subject_name:t.subject_name,subject_id:t.subject_id,subject_type:t.nature})}})},tooltip:"Edit Subject",onClick:""}},function(t){return{icon:function(){return Object(_.jsx)(d.a,{icon:l.p,style:{fontSize:"1rem"},onClick:function(c){return e.deleteSubjects(c,t.subject_id)}})},tooltip:"Delete Subject",onClick:"",disabled:"active"!==t.status}}]})]})})}}]),c}(j.Component);t.default=y},536:function(e,t,c){"use strict";c(0);var a=c(18);t.a=function(){return Object(a.jsx)("div",{className:"spinner-border spinner-border-sm",role:"status"})}},537:function(e,t,c){"use strict";var a=c(44),n=c(143),i=c(0),s=c.n(i),o=c(142),r=c(524),j=c(18);var u=function(e){return Object(j.jsx)("div",{className:"invalid-feedback",children:e.children})},l=["formik","name","options","switcher"],d=Object(r.f)((function(e){var t=e.formik,c=e.name,i=e.options,d=(e.switcher,Object(n.a)(e,l)),b=Object(r.g)(t.errors,c),m=Object(r.g)(t.touched,c);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(r.b,Object(a.a)(Object(a.a)({name:c},d),{},{children:function(e){var t=e.field;return i.map((function(e){return Object(j.jsx)(s.a.Fragment,{children:Object(j.jsx)(o.v,Object(a.a)(Object(a.a)(Object(a.a)({id:e.value},t),d),{},{value:e.value,checked:t.value?t.value.includes(e.value):"",label:e.text,disabled:!!e.disabled&&e.disabled,className:"".concat(b&&m?"is-invalid":"","\n                  }")}))},e.text)}))}})),Object(j.jsx)(r.a,{name:c,component:u})]})})),b=["formik","name","id"];var m=Object(r.f)((function(e){var t=e.formik,c=e.name,i=e.id,s=Object(n.a)(e,b),l=t.handleChange,d=t.handleBlur,m=Object(r.g)(t.errors,c),h=Object(r.g)(t.touched,c);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(o.x,Object(a.a)(Object(a.a)({id:i,name:c,onChange:l,onBlur:d},s),{},{className:"form-control ".concat(m&&h?"is-invalid":"")})),Object(j.jsx)(r.a,{name:c,component:u})]})})),h=c(526),O=["formik","name","id","options"],f=Object(r.f)((function(e){var t=e.formik,c=e.name,s=e.id,l=e.options,d=Object(n.a)(e,O),b=t.handleChange,m=t.handleBlur,f=Object(r.g)(t.errors,c),p=Object(r.g)(t.touched,c),v=Object(i.useState)([]),x=Object(h.a)(v,2),S=x[0],g=x[1],_=[];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(r.b,{name:c,id:s,onChange:b,onBlur:m,children:function(e){var n=e.field;return S.map((function(e){return _.push(e.value),_})),t.values["".concat(c)]=_,Object(j.jsx)(o.M,Object(a.a)(Object(a.a)(Object(a.a)({},n),d),{},{options:l,onChange:g,className:"form-control  ".concat(f&&p?"is-invalid":"")}))}}),Object(j.jsx)(r.a,{name:c,component:u})]})})),p=["formik","name","options"],v=Object(r.f)((function(e){var t=e.formik,c=e.name,i=e.options,l=Object(n.a)(e,p),d=Object(r.g)(t.errors,c),b=Object(r.g)(t.touched,c);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(r.b,Object(a.a)(Object(a.a)({name:c},l),{},{children:function(e){var t=e.field;return i.map((function(e){return Object(j.jsx)(s.a.Fragment,{children:Object(j.jsx)(o.v,Object(a.a)(Object(a.a)(Object(a.a)({type:"radio",id:e.value},t),l),{},{value:e.value,checked:t.value===e.value,label:e.text,className:"".concat(d&&b?"is-invalid":"")}))},e.text)}))}})),Object(j.jsx)(r.a,{name:c,component:u})]})})),x=["formik","name","options","id","placeholder"],S=Object(r.f)((function(e){var t=e.formik,c=e.name,i=e.options,s=e.id,l=e.placeholder,d=Object(n.a)(e,x),b=(t.handleChange,t.handleBlur,Object(r.g)(t.errors,c)),m=Object(r.g)(t.touched,c);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(r.b,Object(a.a)(Object(a.a)({name:c},d),{},{children:function(e){var t=e.field;return Object(j.jsxs)(o.z,Object(a.a)(Object(a.a)(Object(a.a)({id:s,name:c},d),t),{},{className:"form-control ".concat(b&&m?"is-invalid":""),children:[Object(j.jsxs)("option",{value:"",children:[" ",l||"Select..."]}),i.map((function(e){return Object(j.jsx)("option",{value:e,children:e},e)}))]}))}})),Object(j.jsx)(r.a,{name:c,component:u})]})})),g=["formik","name","options","id","placeholder"],_=Object(r.f)((function(e){var t=e.formik,c=e.name,i=e.options,s=e.id,l=e.placeholder,d=Object(n.a)(e,g),b=Object(r.g)(t.errors,c),m=Object(r.g)(t.touched,c);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(r.b,Object(a.a)(Object(a.a)({name:c},d),{},{children:function(e){var t=e.field;return Object(j.jsxs)(o.z,Object(a.a)(Object(a.a)(Object(a.a)({id:s,name:c},d),t),{},{className:"form-control ".concat(b&&m?"is-invalid":""),children:[Object(j.jsxs)("option",{value:"",children:[" ",l||"Select..."]}),i.map((function(e){return Object(j.jsx)("option",{value:e.value,children:e.text},e.value)}))]}))}})),Object(j.jsx)(r.a,{name:c,component:u})]})})),k=["formik","name","id"],y=Object(r.f)((function(e){var t=e.formik,c=e.name,i=e.id,s=Object(n.a)(e,k),l=(t.handleChange,t.handleBlur,Object(r.g)(t.errors,c)),d=Object(r.g)(t.touched,c);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(r.b,Object(a.a)(Object(a.a)({name:c},s),{},{children:function(e){var t=e.field;return Object(j.jsx)(o.A,Object(a.a)(Object(a.a)(Object(a.a)({id:i,name:c},t),s),{},{className:"form-control ".concat(l&&d?"is-invalid":"")}))}})),Object(j.jsx)(r.a,{name:c,component:u})]})})),C=["control"];t.a=function(e){var t=e.control,c=Object(n.a)(e,C);switch(t){case"input":return Object(j.jsx)(m,Object(a.a)({},c));case"textarea":return Object(j.jsx)(y,Object(a.a)({},c));case"select":return Object(j.jsx)(S,Object(a.a)({},c));case"selectwithkey":return Object(j.jsx)(_,Object(a.a)({},c));case"multiselect":return Object(j.jsx)(f,Object(a.a)({},c));case"radio":return Object(j.jsx)(v,Object(a.a)({},c));case"checkbox":return Object(j.jsx)(d,Object(a.a)({},c));default:return null}}}}]);
//# sourceMappingURL=33.c79afadb.chunk.js.map