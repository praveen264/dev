(this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]||[]).push([[18],{1233:function(e,t,a){},1596:function(e,t,a){"use strict";a.r(t);a(568);var c=a(540),s=a.n(c),n=a(541),r=a(526),o=a(0),b=a.n(o),i=a(953),j=(a(636),a(618),a(532)),u=a.n(j),l=(a(1233),a(658),a(142),a(930)),O=(a(535),a(18)),h=Object(l.a)((function(e){return{root:{"& > *":{margin:e.spacing(2)}},input:{display:"none"},formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}}));t.default=function(e){var t=e.match.params.school_id,a=(h(),Object(o.useState)("")),c=Object(r.a)(a,2),j=(c[0],c[1],Object(o.useState)("")),l=Object(r.a)(j,2),d=(l[0],l[1],Object(o.useState)("")),m=Object(r.a)(d,2),p=(m[0],m[1],Object(o.useState)("")),f=Object(r.a)(p,2),N=(f[0],f[1],Object(o.useState)("")),S=Object(r.a)(N,2),x=(S[0],S[1],Object(o.useState)("")),g=Object(r.a)(x,2),P=(g[0],g[1],Object(o.useState)("")),v=Object(r.a)(P,2),F=(v[0],v[1],Object(o.useState)("")),y=Object(r.a)(F,2),k=(y[0],y[1],Object(o.useState)("")),w=Object(r.a)(k,2),C=(w[0],w[1],Object(o.useState)("")),M=Object(r.a)(C,2),L=(M[0],M[1],Object(o.useState)("")),_=Object(r.a)(L,2),E=(_[0],_[1],Object(o.useState)("")),A=Object(r.a)(E,2),G=(A[0],A[1],Object(o.useState)("")),D=Object(r.a)(G,2),B=(D[0],D[1],Object(o.useState)("")),U=Object(r.a)(B,2),J=(U[0],U[1],Object(o.useState)("")),W=Object(r.a)(J,2),T=(W[0],W[1],Object(o.useState)([])),z=Object(r.a)(T,2),I=(z[0],z[1]),R=Object(o.useState)(),Z=Object(r.a)(R,2),$=Z[0],q=(Z[1],Object(o.useState)([])),H=Object(r.a)(q,2),K=(H[0],H[1]),Q=Object(o.useState)(),V=Object(r.a)(Q,2),X=V[0],Y=(V[1],Object(o.useState)()),ee=Object(r.a)(Y,2),te=(ee[0],ee[1],Object(o.useState)(!1)),ae=Object(r.a)(te,2),ce=(ae[0],ae[1],b.a.useState([])),se=Object(r.a)(ce,2),ne=(se[0],se[1],Object(o.useState)([])),re=Object(r.a)(ne,2),oe=(re[0],re[1]),be=Object(o.useState)([]),ie=Object(r.a)(be,2),je=(ie[0],ie[1]),ue=Object(o.useState)(""),le=Object(r.a)(ue,2),Oe=(le[0],le[1],Object(o.useState)("")),he=Object(r.a)(Oe,2),de=(he[0],he[1],Object(o.useState)({})),me=Object(r.a)(de,2),pe=(me[0],me[1],Object(o.useState)({})),fe=Object(r.a)(pe,2),Ne=(fe[0],fe[1],Object(o.useState)({})),Se=Object(r.a)(Ne,2),xe=(Se[0],Se[1],Object(o.useState)({})),ge=Object(r.a)(xe,2),Pe=(ge[0],ge[1],Object(o.useState)({})),ve=Object(r.a)(Pe,2),Fe=(ve[0],ve[1],Object(o.useState)({})),ye=Object(r.a)(Fe,2),ke=(ye[0],ye[1],Object(o.useState)({})),we=Object(r.a)(ke,2),Ce=(we[0],we[1],Object(o.useState)({})),Me=Object(r.a)(Ce,2),Le=(Me[0],Me[1],Object(o.useState)({})),_e=Object(r.a)(Le,2),Ee=(_e[0],_e[1],Object(o.useState)({})),Ae=Object(r.a)(Ee,2),Ge=(Ae[0],Ae[1],Object(o.useState)({})),De=Object(r.a)(Ge,2),Be=(De[0],De[1],Object(o.useState)({})),Ue=Object(r.a)(Be,2),Je=(Ue[0],Ue[1],Object(o.useState)({})),We=Object(r.a)(Je,2),Te=(We[0],We[1],Object(o.useState)({})),ze=Object(r.a)(Te,2),Ie=(ze[0],ze[1],Object(o.useState)({})),Re=Object(r.a)(Ie,2),Ze=(Re[0],Re[1],Object(o.useState)({})),$e=Object(r.a)(Ze,2),qe=($e[0],$e[1],Object(o.useState)("")),He=Object(r.a)(qe,2),Ke=(He[0],He[1]),Qe=Object(o.useState)(""),Ve=Object(r.a)(Qe,2),Xe=Ve[0],Ye=Ve[1],et=function(){var e=Object(n.a)(s.a.mark((function e(){var a,c,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=nt,console.log(a),c=0;case 3:if(!(c<a.length)){e.next=14;break}return n=/^[A-Za-z]+$/,a[c].username=a[c].FirstName.substring(0,4).concat(a[c].ParentMobileNumber.slice(-5)),e.next=8,u.a.post("".concat("http://test.saakshar.co.in/api/v1","/auth/user_exists_or_not/"),{username:a[c].username});case 8:r=e.sent,console.log(r.data.message),a[c].FirstName.match(n)&&a[c].FirstName&&a[c].ClassName&&a[c].SectionName&&a[c].ParentFirstName&&a[c].ParentFirstName.match(n)&&!isNaN(a[c].ParentMobileNumber)&&10==a[c].ParentMobileNumber.length&&"Username already exist"!=r.data.message?a[c].username=a[c].FirstName.substring(0,4).concat(a[c].ParentMobileNumber.slice(-5)):(a[c].error=[],a[c].FirstName.match(n)||a[c].error.push("error in first name:first name should not have spaces or numbers"),a[c].FirstName||a[c].error.push("error:first name cannot be left blank"),a[c].ClassName||a[c].error.push("error:Class name cannot be left blank"),a[c].SectionName||a[c].error.push("error:Section name cannot be left blank"),a[c].ParentFirstName&&a[c].ParentFirstName.match(n)||a[c].error.push("error:Parent first name cannot be left blank and cannot contain spaces or numbers"),isNaN(a[c].ParentMobileNumber)&&a[c].error.push("error:Parent mobile number should be of 10 digits and cannot contain albhabets"),10!=a[c].ParentMobileNumber.length&&a[c].error.push("error:Parent mobile number should be of 10 digits and cannot contain albhabets"),"Username already exist"==r.data.message&&a[c].error.push("error:Username already exists"),a[c].FirstName="",a[c].LastName="",a[c].AdmissionNo="",a[c].ParentEmail="",a[c].ParentLastName="",a[c].ParentMobileNumber="",a[c].ParentGender="",a[c].Gender="",a[c].DOB="",a[c].ParentFirstName="",a[c].ClassName="",a[c].SectionName="",a[c].username="");case 11:c++,e.next=3;break;case 14:return rt(a),e.next=17,u.a.post("".concat("http://test.saakshar.co.in/api/v1","/auth/create-student/").concat(t),a).then((function(e){console.log("after !!!!"),console.log(e.data),"student has been created"!=e.data.message?Ke(e.data.error):Ye("student has been created")})).catch((function(e){console.log(e)}));case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){u.a.get("http://test.saakshar.co.in/api/v1/auth/get-countries").then((function(e){var t=e.data.data;oe(t)})).catch((function(e){console.log(e)}))}),[]),Object(o.useEffect)((function(){u.a.get("http://test.saakshar.co.in/api/v1/auth/get-chain-school-list").then((function(e){je(e.data.data)})).catch((function(e){console.log(e)}))}),[]);Object(o.useEffect)((function(){$&&u.a.get("http://test.saakshar.co.in/api/v1"+"/auth/get-states/".concat($)).then((function(e){var t=e.data.data;I(t)})).catch((function(e){console.log(e)}))}),[$]),Object(o.useEffect)((function(){X&&u.a.get("http://test.saakshar.co.in/api/v1"+"/auth/get-cities/".concat($,"/").concat(X)).then((function(e){var t=e.data.data;K(t)})).catch((function(e){console.log(e)}))}),[X]);var tt=Object(o.useState)([{class_name:"",total_student:""}]),at=Object(r.a)(tt,2),ct=(at[0],at[1],Object(o.useState)([])),st=Object(r.a)(ct,2),nt=st[0],rt=st[1];return Object(O.jsxs)("div",{children:[Object(O.jsxs)("form",{children:[Object(O.jsxs)("label",{children:[Object(O.jsx)("input",{type:"file",onChange:function(e){!function(e){var t=JSON.parse(localStorage.getItem("user")).token;new Promise((function(t,a){var c=new FileReader;c.readAsArrayBuffer(e),c.onload=function(e){var a=e.target.result,c=i.read(a,{type:"binary",cellDates:!0,dateNF:"mm/dd/yyyy;"}),s=c.SheetNames[1],n=c.Sheets[s],r=i.utils.sheet_to_json(n,{raw:!1});t(r)},c.onerror=function(e){a(e)}})).then(function(){var e=Object(n.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rt(a),console.log(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}(e.target.files[0])}}),Object(O.jsx)("span",{class:"file-button",children:"Choose File"})]}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{type:"button",className:"btn btn-success",onClick:et,children:"Upload"})," \xa0",Object(O.jsx)("a",{href:"/files/StandardStudentTemplate.xlsx",className:"btn btn-primary",download:!0,children:"Download standard template"})]}),Object(O.jsxs)("table",{class:"table container",children:[Object(O.jsx)("thead",{children:""!=Xe?Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{scope:"col",children:"First Name"}),Object(O.jsx)("th",{scope:"col",children:"Last Name"}),Object(O.jsx)("th",{scope:"col",children:"Gender"}),Object(O.jsx)("th",{scope:"col",children:"DOB"}),Object(O.jsx)("th",{scope:"col",children:"Class Name"}),Object(O.jsx)("th",{scope:"col",children:"Section Name"}),Object(O.jsx)("th",{scope:"col",children:"Admission No"}),Object(O.jsx)("th",{scope:"col",children:"Parent FirstName"}),Object(O.jsx)("th",{scope:"col",children:"Parent LastName"}),Object(O.jsx)("th",{scope:"col",children:"Parent Email"}),Object(O.jsx)("th",{scope:"col",children:"Parent Gender"}),Object(O.jsx)("th",{scope:"col",children:"Parent MobileNumber"}),Object(O.jsx)("th",{scope:"col",children:"username"})]}):""}),Object(O.jsx)("tbody",{children:""!=Xe?nt.map((function(e){return""!=e.FirstName&&""!=e.LastName&&""!=e.ParentFirstName&&""!=e.ClassName&&""!=e.SectionName&&""!=e.ParentMobileNumber?Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:e.FirstName}),Object(O.jsx)("th",{children:e.LastName}),Object(O.jsx)("th",{children:e.Gender}),Object(O.jsx)("th",{children:e.DOB}),Object(O.jsx)("th",{children:e.ClassName}),Object(O.jsx)("th",{children:e.SectionName}),Object(O.jsx)("th",{children:e.AdmissionNo}),Object(O.jsx)("th",{children:e.ParentFirstName}),Object(O.jsx)("th",{children:e.ParentLastName}),Object(O.jsx)("th",{children:e.ParentEmail}),Object(O.jsx)("th",{children:e.ParentGender}),Object(O.jsx)("th",{children:e.ParentMobileNumber}),Object(O.jsx)("th",{children:e.username})]},e.FirstName):Object(O.jsx)("tr",{style:{border:"3px solid red"},className:"danger",children:Object(O.jsx)("td",{colSpan:"13",children:e.error})})})):""})]})]})}},804:function(e,t){},955:function(e,t){},956:function(e,t){}}]);
//# sourceMappingURL=18.c9a43a38.chunk.js.map