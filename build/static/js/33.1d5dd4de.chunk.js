(this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]=this["webpackJsonp@coreui/coreui-pro-react-admin-template-starter"]||[]).push([[33],{1083:function(e,t){},1297:function(e,t){},1298:function(e,t){},1594:function(e,t,a){"use strict";a.r(t);a(697);var c=a(580),s=a.n(c),n=a(581),r=a(543),o=a(0),i=a.n(o),j=a(1295),b=(a(590),a(925),a(555)),u=a.n(b),l=(a(1565),a(142),a(841)),O=(a(588),a(18)),h=Object(l.a)((function(e){return{root:{"& > *":{margin:e.spacing(2)}},input:{display:"none"},formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}}));t.default=function(e){var t=e.match.params.school_id,a=(h(),Object(o.useState)("")),c=Object(r.a)(a,2),b=(c[0],c[1],Object(o.useState)("")),l=Object(r.a)(b,2),d=(l[0],l[1],Object(o.useState)("")),m=Object(r.a)(d,2),p=(m[0],m[1],Object(o.useState)("")),f=Object(r.a)(p,2),S=(f[0],f[1],Object(o.useState)("")),N=Object(r.a)(S,2),x=(N[0],N[1],Object(o.useState)("")),g=Object(r.a)(x,2),P=(g[0],g[1],Object(o.useState)("")),k=Object(r.a)(P,2),v=(k[0],k[1],Object(o.useState)("")),w=Object(r.a)(v,2),y=(w[0],w[1],Object(o.useState)("")),F=Object(r.a)(y,2),C=(F[0],F[1],Object(o.useState)("")),L=Object(r.a)(C,2),E=(L[0],L[1],Object(o.useState)("")),A=Object(r.a)(E,2),B=(A[0],A[1],Object(o.useState)("")),D=Object(r.a)(B,2),G=(D[0],D[1],Object(o.useState)("")),M=Object(r.a)(G,2),_=(M[0],M[1],Object(o.useState)("")),I=Object(r.a)(_,2),J=(I[0],I[1],Object(o.useState)("")),T=Object(r.a)(J,2),W=(T[0],T[1],Object(o.useState)([])),z=Object(r.a)(W,2),R=(z[0],z[1]),U=Object(o.useState)(),Z=Object(r.a)(U,2),$=Z[0],q=(Z[1],Object(o.useState)([])),H=Object(r.a)(q,2),K=(H[0],H[1]),Q=Object(o.useState)(),V=Object(r.a)(Q,2),X=V[0],Y=(V[1],Object(o.useState)()),ee=Object(r.a)(Y,2),te=(ee[0],ee[1],Object(o.useState)(!1)),ae=Object(r.a)(te,2),ce=(ae[0],ae[1],i.a.useState([])),se=Object(r.a)(ce,2),ne=(se[0],se[1],Object(o.useState)([])),re=Object(r.a)(ne,2),oe=(re[0],re[1]),ie=Object(o.useState)([]),je=Object(r.a)(ie,2),be=(je[0],je[1]),ue=Object(o.useState)(""),le=Object(r.a)(ue,2),Oe=(le[0],le[1],Object(o.useState)("")),he=Object(r.a)(Oe,2),de=(he[0],he[1],Object(o.useState)({})),me=Object(r.a)(de,2),pe=(me[0],me[1],Object(o.useState)({})),fe=Object(r.a)(pe,2),Se=(fe[0],fe[1],Object(o.useState)({})),Ne=Object(r.a)(Se,2),xe=(Ne[0],Ne[1],Object(o.useState)({})),ge=Object(r.a)(xe,2),Pe=(ge[0],ge[1],Object(o.useState)({})),ke=Object(r.a)(Pe,2),ve=(ke[0],ke[1],Object(o.useState)({})),we=Object(r.a)(ve,2),ye=(we[0],we[1],Object(o.useState)({})),Fe=Object(r.a)(ye,2),Ce=(Fe[0],Fe[1],Object(o.useState)({})),Le=Object(r.a)(Ce,2),Ee=(Le[0],Le[1],Object(o.useState)({})),Ae=Object(r.a)(Ee,2),Be=(Ae[0],Ae[1],Object(o.useState)({})),De=Object(r.a)(Be,2),Ge=(De[0],De[1],Object(o.useState)({})),Me=Object(r.a)(Ge,2),_e=(Me[0],Me[1],Object(o.useState)({})),Ie=Object(r.a)(_e,2),Je=(Ie[0],Ie[1],Object(o.useState)({})),Te=Object(r.a)(Je,2),We=(Te[0],Te[1],Object(o.useState)({})),ze=Object(r.a)(We,2),Re=(ze[0],ze[1],Object(o.useState)({})),Ue=Object(r.a)(Re,2),Ze=(Ue[0],Ue[1],Object(o.useState)({})),$e=Object(r.a)(Ze,2),qe=($e[0],$e[1],Object(o.useState)("")),He=Object(r.a)(qe,2),Ke=(He[0],He[1]),Qe=Object(o.useState)(""),Ve=Object(r.a)(Qe,2),Xe=Ve[0],Ye=Ve[1],et=function(){var e=Object(n.a)(s.a.mark((function e(){var a,c,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(alert("ok"),a=nt,console.log(a),c=0;c<a.length;c++)n=/^[A-Za-z]+$/,a[c].FirstName.match(n)&&a[c].FirstName&&a[c].ClassName&&a[c].DOB&&a[c].SectionName&&a[c].ParentFirstName&&a[c].ParentFirstName.match(n)&&!isNaN(a[c].ParentMobileNumber)&&10==a[c].ParentMobileNumber.length?(alert("ok"),a[c].username=a[c].FirstName.substring(0,4).concat(a[c].ParentMobileNumber.slice(-5))):(alert("not ok at "+c),a[c].FirstName="",a[c].LastName="",a[c].AdmissionNo="",a[c].ParentEmail="",a[c].ParentLastName="",a[c].ParentMobileNumber="",a[c].ParentGender="",a[c].Gender="",a[c].DOB="",a[c].ParentFirstName="",a[c].ClassName="",a[c].SectionName="",a[c].username="");return rt(a),e.next=7,u.a.post("".concat("http://test.saakshar.co.in/api/v1","/auth/create-student/").concat(t),a).then((function(e){console.log("after !!!!"),console.log(e.data),"student has been created"!=e.data.message?(Ke(e.data.error),alert(e.data.error)):Ye("student has been created")})).catch((function(e){console.log(e)}));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){u.a.get("http://test.saakshar.co.in/api/v1/auth/get-countries").then((function(e){var t=e.data.data;oe(t)})).catch((function(e){console.log(e)}))}),[]),Object(o.useEffect)((function(){u.a.get("http://test.saakshar.co.in/api/v1/auth/get-chain-school-list").then((function(e){be(e.data.data)})).catch((function(e){console.log(e)}))}),[]);Object(o.useEffect)((function(){$&&u.a.get("http://test.saakshar.co.in/api/v1"+"/auth/get-states/".concat($)).then((function(e){var t=e.data.data;R(t)})).catch((function(e){console.log(e)}))}),[$]),Object(o.useEffect)((function(){X&&u.a.get("http://test.saakshar.co.in/api/v1"+"/auth/get-cities/".concat($,"/").concat(X)).then((function(e){var t=e.data.data;K(t)})).catch((function(e){console.log(e)}))}),[X]);var tt=Object(o.useState)([{class_name:"",total_student:""}]),at=Object(r.a)(tt,2),ct=(at[0],at[1],Object(o.useState)([])),st=Object(r.a)(ct,2),nt=st[0],rt=st[1];return Object(O.jsxs)("div",{children:[Object(O.jsxs)("form",{children:[Object(O.jsx)("input",{type:"file",onChange:function(e){!function(e){var t=JSON.parse(localStorage.getItem("user")).token;new Promise((function(t,a){var c=new FileReader;c.readAsArrayBuffer(e),c.onload=function(e){var a=e.target.result,c=j.read(a,{type:"binary",cellDates:!0,dateNF:"mm/dd/yyyy;"}),s=c.SheetNames[1],n=c.Sheets[s],r=j.utils.sheet_to_json(n,{raw:!1});t(r)},c.onerror=function(e){a(e)}})).then(function(){var e=Object(n.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:rt(a),console.log(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}(e.target.files[0])}}),Object(O.jsx)("button",{type:"button",className:"btn btn-success",onClick:et,children:"Upload"})," \xa0",Object(O.jsx)("a",{href:"/files/StandardStudentTemplate.xlsx",className:"btn btn-primary",download:!0,children:"Download standard template"})]}),Object(O.jsxs)("table",{class:"table container",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{scope:"col",children:"First Name"}),Object(O.jsx)("th",{scope:"col",children:"Last Name"}),Object(O.jsx)("th",{scope:"col",children:"Gender"}),Object(O.jsx)("th",{scope:"col",children:"DOB"}),Object(O.jsx)("th",{scope:"col",children:"Class Name"}),Object(O.jsx)("th",{scope:"col",children:"Section Name"}),Object(O.jsx)("th",{scope:"col",children:"Admission No"}),Object(O.jsx)("th",{scope:"col",children:"Parent FirstName"}),Object(O.jsx)("th",{scope:"col",children:"Parent LastName"}),Object(O.jsx)("th",{scope:"col",children:"Parent Email"}),Object(O.jsx)("th",{scope:"col",children:"Parent Gender"}),Object(O.jsx)("th",{scope:"col",children:"Parent MobileNumber"}),Object(O.jsx)("th",{scope:"col",children:"username"})]})}),Object(O.jsx)("tbody",{children:""!=Xe?nt.map((function(e){return""!=e.FirstName&&""!=e.LastName&&""!=e.AdmissionNo&&""!=e.ParentEmail&&""!=e.ParentFirstName&&""!=e.ParentLastName&&""!=e.ParentGender&&""!=e.ParentMobileNumber&&""!=e.DOB?Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:e.FirstName}),Object(O.jsx)("th",{children:e.LastName}),Object(O.jsx)("th",{children:e.Gender}),Object(O.jsx)("th",{children:e.DOB}),Object(O.jsx)("th",{children:e.ClassName}),Object(O.jsx)("th",{children:e.SectionName}),Object(O.jsx)("th",{children:e.AdmissionNo}),Object(O.jsx)("th",{children:e.ParentFirstName}),Object(O.jsx)("th",{children:e.ParentLastName}),Object(O.jsx)("th",{children:e.ParentEmail}),Object(O.jsx)("th",{children:e.ParentGender}),Object(O.jsx)("th",{children:e.ParentMobileNumber}),Object(O.jsx)("th",{children:e.username})]},e.FirstName):Object(O.jsx)("tr",{style:{border:"3px solid red"},className:"danger",children:Object(O.jsx)("td",{colSpan:"13",children:"datas at this row was not uploaded due to some problem"})})})):""})]})]})}},548:function(e,t,a){var c=a(146).toast;e.exports=function(e,t){switch(e){case"info":c.info(t);break;case"success":c.success(t);break;case"warning":c.warn(t);break;case"error":c.error(t);break;case"dark":c.dark(t);break;default:c(t)}}},555:function(e,t,a){var c,s=a(548),n=a(590).default,r="";localStorage.getItem("user")&&(r=JSON.parse(localStorage.getItem("user")).token),""==r?(console.log("there isno token"),c=n.create({timeout:6e3,headers:{"Content-Type":"application/json"}})):c=n.create({timeout:6e3,headers:{"Content-Type":"application/json",authorization:"Bearer "+r}}),c.interceptors.response.use((function(e){return e}),(function(e){401===e.response.status?(localStorage.removeItem("user"),window.location="/#/login",console.log(e.response.data.message),s("error",e.response.data.message)):s("error",e.response.data.message)})),e.exports=c}}]);
//# sourceMappingURL=33.1d5dd4de.chunk.js.map